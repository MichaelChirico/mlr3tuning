<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>TuningInstance Class — TuningInstance • mlr3tuning</title>

<!-- favicons -->
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png" />
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png" />

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>

<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/journal/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />

<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.1/css/all.min.css" integrity="sha256-PbSmjxuVAzJ6FPvNYsrXygfGhNJYyZ2GktDbkMBqQZg=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.1/css/v4-shims.min.css" integrity="sha256-A6jcAdwFD48VMjlI3GDxUd+eCQa7/KWy6G9oe/ovaPA=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<link href="../extra.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="TuningInstance Class — TuningInstance" />
<meta property="og:description" content="Specifies a general tuning scenario, including performance evaluator and archive for Tuners to
act upon. This class encodes the black box objective function,
that a Tuner has to optimize. It allows the basic operations of querying the objective
at design points ($eval_batch()), storing the evaluations in an internal archive
and querying the archive ($archive()).
Evaluations of hyperparameter configurations are performed in batches by calling mlr3::benchmark() internally.
Before and after a batch is evaluated, the Terminator is queried for the remaining budget.
If the available budget is exhausted, an exception is raised, and no further evaluations can be performed from this point on.
A list of measures can be passed to the instance, and they will always be all evaluated.
However, single-criteria tuners optimize only the first measure.
The tuner is also supposed to store its final result, consisting of a selected hyperparameter configuration
and associated estimated performance values, by calling the method instance$assign_result." />
<meta name="twitter:card" content="summary" />


<meta name="robots" content="noindex">

<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">mlr3tuning</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Version">0.1.1.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../reference/index.html">
    <span class="fa fa fa fa-file-alt"></span>
     
    Reference
  </a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
<li>
  <a href="https://mlr3book.mlr-org.com">
    <span class="fa fa fa fa-link"></span>
     
    mlr3book
  </a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/mlr-org/mlr3tuning">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="https://mlr-org.slack.com">
    <span class="fab fa fab fa-slack"></span>
     
  </a>
</li>
<li>
  <a href="https://stackoverflow.com/questions/tagged/mlr">
    <span class="fab fa fab fa-stack-overflow"></span>
     
  </a>
</li>
<li>
  <a href="https://mlr-org.com/">
    <span class="fa fa-rss"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>TuningInstance Class</h1>
    <small class="dont-index">Source: <a href='https://github.com/mlr-org/mlr3tuning/blob/master/R/TuningInstance.R'><code>R/TuningInstance.R</code></a></small>
    <div class="hidden name"><code>TuningInstance.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Specifies a general tuning scenario, including performance evaluator and archive for Tuners to
act upon. This class encodes the black box objective function,
that a <a href='Tuner.html'>Tuner</a> has to optimize. It allows the basic operations of querying the objective
at design points (<code>$eval_batch()</code>), storing the evaluations in an internal archive
and querying the archive (<code>$archive()</code>).</p>
<p>Evaluations of hyperparameter configurations are performed in batches by calling <code><a href='https://mlr3.mlr-org.com/reference/benchmark.html'>mlr3::benchmark()</a></code> internally.
Before and after a batch is evaluated, the <a href='Terminator.html'>Terminator</a> is queried for the remaining budget.
If the available budget is exhausted, an exception is raised, and no further evaluations can be performed from this point on.</p>
<p>A list of measures can be passed to the instance, and they will always be all evaluated.
However, single-criteria tuners optimize only the first measure.</p>
<p>The tuner is also supposed to store its final result, consisting of a selected hyperparameter configuration
and associated estimated performance values, by calling the method <code>instance$assign_result</code>.</p>
    </div>



    <h2 class="hasAnchor" id="format"><a class="anchor" href="#format"></a>Format</h2>

    <p><a href='https://rdrr.io/pkg/R6/man/R6Class.html'>R6::R6Class</a> object.</p>
    <h2 class="hasAnchor" id="construction"><a class="anchor" href="#construction"></a>Construction</h2>

    
<pre>inst = TuningInstance$new(task, learner, resampling, measures,
  param_set, terminator, bm_args = list())
</pre>

<p>This defines the resampled performance of a learner on a task, a feasibility region
for the parameters the tuner is supposed to optimize, and a termination criterion.</p><ul>
<li><p><code>task</code> :: <a href='https://mlr3.mlr-org.com/reference/Task.html'>mlr3::Task</a>.</p></li>
<li><p><code>learner</code> :: <a href='https://mlr3.mlr-org.com/reference/Learner.html'>mlr3::Learner</a>.</p></li>
<li><p><code>resampling</code> :: <a href='https://mlr3.mlr-org.com/reference/Resampling.html'>mlr3::Resampling</a><br />
Note that uninstantiated resamplings are instantiated during construction so that all configurations
are evaluated on the same data splits.</p></li>
<li><p><code>measures</code> :: list of <a href='https://mlr3.mlr-org.com/reference/Measure.html'>mlr3::Measure</a>.</p></li>
<li><p><code>param_set</code> :: <a href='https://paradox.mlr-org.com/reference/ParamSet.html'>paradox::ParamSet</a>.</p></li>
<li><p><code>terminator</code> :: <a href='Terminator.html'>Terminator</a>.</p></li>
<li><p><code>bm_args</code> :: named <code><a href='https://rdrr.io/r/base/list.html'>list()</a></code><br />
Further arguments for <code><a href='https://mlr3.mlr-org.com/reference/benchmark.html'>mlr3::benchmark()</a></code>.</p></li>
</ul>

    <h2 class="hasAnchor" id="fields"><a class="anchor" href="#fields"></a>Fields</h2>

    

<ul>
<li><p><code>task</code> :: <a href='https://mlr3.mlr-org.com/reference/Task.html'>mlr3::Task</a>; from construction.</p></li>
<li><p><code>learner</code> :: <a href='https://mlr3.mlr-org.com/reference/Learner.html'>mlr3::Learner</a>; from construction.</p></li>
<li><p><code>resampling</code> :: <a href='https://mlr3.mlr-org.com/reference/Resampling.html'>mlr3::Resampling</a>; from construction.</p></li>
<li><p><code>measures</code> :: list of <a href='https://mlr3.mlr-org.com/reference/Measure.html'>mlr3::Measure</a>; from construction.</p></li>
<li><p><code>param_set</code> :: <a href='https://paradox.mlr-org.com/reference/ParamSet.html'>paradox::ParamSet</a>; from construction.</p></li>
<li><p><code>terminator</code> :: <a href='Terminator.html'>Terminator</a>; from construction.</p></li>
<li><p><code>bmr</code> :: <a href='https://mlr3.mlr-org.com/reference/BenchmarkResult.html'>mlr3::BenchmarkResult</a><br />
A benchmark result, container object for all performed <a href='https://mlr3.mlr-org.com/reference/ResampleResult.html'>mlr3::ResampleResult</a>s when evaluating hyperparameter configurations.</p></li>
<li><p><code>n_evals</code> :: <code><a href='https://rdrr.io/r/base/integer.html'>integer(1)</a></code><br />
Number of configuration evaluations stored in the container.</p></li>
<li><p><code>start_time</code> :: <code><a href='https://rdrr.io/r/base/DateTimeClasses.html'>POSIXct(1)</a></code><br />
Time the tuning was started.
This is set in the beginning of <code>$tune()</code> of <a href='Tuner.html'>Tuner</a>.</p></li>
<li><p><code>result</code> :: named <code><a href='https://rdrr.io/r/base/list.html'>list()</a></code><br />
Result of the tuning, i.e., the optimal configuration and its estimated performance:</p><ul>
<li><p><code>"perf"</code>: Named vector of estimated performance values of the best configuration found.</p></li>
<li><p><code>"tune_x"</code>: Named list of optimal hyperparameter settings, without potential <code>trafo</code> function applied.</p></li>
<li><p><code>"params"</code>: Named list of optimal hyperparameter settings, similar to <code>tune_x</code>, but with potential <code>trafo</code> function applied.
Also, if the learner had some extra parameters statically set before tuning, these are included here.</p></li>
</ul></li>
</ul>

    <h2 class="hasAnchor" id="methods"><a class="anchor" href="#methods"></a>Methods</h2>

    

<ul>
<li><p><code>eval_batch(dt)</code><br />
<code><a href='https://Rdatatable.gitlab.io/data.table/reference/data.table.html'>data.table::data.table()</a></code> -&gt; named <code><a href='https://rdrr.io/r/base/list.html'>list()</a></code><br />
Evaluates all hyperparameter configurations in <code>dt</code> through resampling, where each configuration is a row, and columns are scalar parameters.
Updates the internal <a href='https://mlr3.mlr-org.com/reference/BenchmarkResult.html'>BenchmarkResult</a> <code>$bmr</code> by reference, and returns a named list with the following elements:</p><ul>
<li><p><code>"batch_nr"</code>: Number of the new batch.
This number is calculated in an auto-increment fashion and also stored inside the <a href='https://mlr3.mlr-org.com/reference/BenchmarkResult.html'>BenchmarkResult</a> as column <code>batch_nr</code></p></li>
<li><p><code>"uhashes"</code>: unique hashes of the added <a href='https://mlr3.mlr-org.com/reference/ResampleResult.html'>ResampleResult</a>s.</p></li>
<li><p><code>"perf"</code>: A <code><a href='https://Rdatatable.gitlab.io/data.table/reference/data.table.html'>data.table::data.table()</a></code> of evaluated performances for each row of the <code>dt</code>.
Has the same number of rows as <code>dt</code>, and the same number of columns as length of <code>measures</code>.
Columns are named with measure-IDs. A cell entry is the (aggregated) performance of that configuration for that measure.</p></li>
</ul>

<p>Before and after each batch-evaluation, the <a href='Terminator.html'>Terminator</a> is checked, and if it is positive, an exception of class <code>terminated_error</code> is raised.
This function should be internally called by the tuner.</p></li>
<li><p><code>tuner_objective(x)</code><br />
<code><a href='https://rdrr.io/r/base/numeric.html'>numeric()</a></code> -&gt; <code><a href='https://rdrr.io/r/base/numeric.html'>numeric(1)</a></code><br />
Evaluates a hyperparameter configuration (untransformed) of only numeric values, and returns a scalar objective value,
where the return value is negated if the measure is maximized.
Internally, <code>$eval_batch()</code> is called with a single row.
This function serves as a objective function for tuners of numeric spaces - which should always be minimized.</p></li>
<li><p><code>best(measure = NULL)</code><br />
(<a href='https://mlr3.mlr-org.com/reference/Measure.html'>mlr3::Measure</a>, <code><a href='https://rdrr.io/r/base/character.html'>character(1)</a></code>) -&gt; <a href='https://mlr3.mlr-org.com/reference/ResampleResult.html'>mlr3::ResampleResult</a><br />
Queries the <a href='https://mlr3.mlr-org.com/reference/BenchmarkResult.html'>mlr3::BenchmarkResult</a> for the best <a href='https://mlr3.mlr-org.com/reference/ResampleResult.html'>mlr3::ResampleResult</a> according to <code>measure</code> (default is the first measure in <code>$measures</code>).
In case of ties, one of the tied values is selected randomly.</p></li>
<li><p><code>archive(unnest = "no")</code><br />
<code><a href='https://rdrr.io/r/base/character.html'>character(1)</a></code> -&gt; <code><a href='https://Rdatatable.gitlab.io/data.table/reference/data.table.html'>data.table::data.table()</a></code><br />
Returns a table of contained resample results, similar to the one returned by <code><a href='https://mlr3.mlr-org.com/reference/benchmark.html'>mlr3::benchmark()</a></code>'s <code>$aggregate()</code> method.
Some interesting columns of this table are:</p><ul>
<li><p>All evaluated measures are included as numeric columns, named with their measure ID.</p></li>
<li><p><code>tune_x</code>: A list column that contains the parameter settings the tuner evaluated, without potential <code>trafo</code> applied.</p></li>
<li><p><code>params</code>: A list column that contains the parameter settings that were actually used in the learner.
Similar to <code>tune_x</code>, but with potential <code>trafo</code> applied.
Also, if the learner had some extra parameters statically set before tuning, these are included here.
<code>unnest</code> can have the values <code>"no"</code>, <code>"tune_x"</code> or <code>"params"</code>. If it is not set to <code>"no"</code>, settings of the respective list-column
are stored in separate columns instead of the list-column, and dependent, inactive parameters are encoded with <code>NA</code>.</p></li>
</ul></li>
<li><p><code>assign_result(tune_x, perf)</code><br />
(<code>list</code>, <code>numeric</code>) -&gt; <code>NULL</code><br />
The tuner writes the best found list of settings and estimated performance values here. For internal use.</p><ul>
<li><p><code>tune_x</code>: Must be a named list of settings only of parameters from <code>param_set</code> and be feasible, untransformed.</p></li>
<li><p><code>perf</code> : Must be a named numeric vector of performance measures, named with performance IDs, regarding all elements in <code>measures</code>.</p></li>
</ul></li>
</ul>


    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='fu'><a href='https://rdrr.io/r/base/library.html'>library</a></span>(<span class='no'>data.table</span>)
<span class='fu'><a href='https://rdrr.io/r/base/library.html'>library</a></span>(<span class='no'>paradox</span>)
<span class='fu'><a href='https://rdrr.io/r/base/library.html'>library</a></span>(<span class='no'>mlr3</span>)

<span class='co'># Objects required to define the performance evaluator:</span>
<span class='no'>task</span> <span class='kw'>=</span> <span class='fu'><a href='https://mlr3.mlr-org.com/reference/mlr_sugar.html'>tsk</a></span>(<span class='st'>"iris"</span>)
<span class='no'>learner</span> <span class='kw'>=</span> <span class='fu'><a href='https://mlr3.mlr-org.com/reference/mlr_sugar.html'>lrn</a></span>(<span class='st'>"classif.rpart"</span>)
<span class='no'>resampling</span> <span class='kw'>=</span> <span class='fu'><a href='https://mlr3.mlr-org.com/reference/mlr_sugar.html'>rsmp</a></span>(<span class='st'>"holdout"</span>)
<span class='no'>measures</span> <span class='kw'>=</span> <span class='fu'><a href='https://mlr3.mlr-org.com/reference/mlr_sugar.html'>msr</a></span>(<span class='st'>"classif.ce"</span>)
<span class='no'>param_set</span> <span class='kw'>=</span> <span class='no'>ParamSet</span>$<span class='fu'>new</span>(<span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span>(
  <span class='no'>ParamDbl</span>$<span class='fu'>new</span>(<span class='st'>"cp"</span>, <span class='kw'>lower</span> <span class='kw'>=</span> <span class='fl'>0.001</span>, <span class='kw'>upper</span> <span class='kw'>=</span> <span class='fl'>0.1</span>),
  <span class='no'>ParamInt</span>$<span class='fu'>new</span>(<span class='st'>"minsplit"</span>, <span class='kw'>lower</span> <span class='kw'>=</span> <span class='fl'>1</span>, <span class='kw'>upper</span> <span class='kw'>=</span> <span class='fl'>10</span>))
)

<span class='no'>terminator</span> <span class='kw'>=</span> <span class='fu'><a href='tnr.html'>term</a></span>(<span class='st'>"evals"</span>, <span class='kw'>n_evals</span> <span class='kw'>=</span> <span class='fl'>5</span>)
<span class='no'>inst</span> <span class='kw'>=</span> <span class='no'>TuningInstance</span>$<span class='fu'>new</span>(
  <span class='kw'>task</span> <span class='kw'>=</span> <span class='no'>task</span>,
  <span class='kw'>learner</span> <span class='kw'>=</span> <span class='no'>learner</span>,
  <span class='kw'>resampling</span> <span class='kw'>=</span> <span class='no'>resampling</span>,
  <span class='kw'>measures</span> <span class='kw'>=</span> <span class='no'>measures</span>,
  <span class='kw'>param_set</span> <span class='kw'>=</span> <span class='no'>param_set</span>,
  <span class='kw'>terminator</span> <span class='kw'>=</span> <span class='no'>terminator</span>
)

<span class='co'># first 4 points as cross product</span>
<span class='no'>design</span> <span class='kw'>=</span> <span class='fu'><a href='https://Rdatatable.gitlab.io/data.table/reference/J.html'>CJ</a></span>(<span class='kw'>cp</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>0.05</span>, <span class='fl'>0.01</span>), <span class='kw'>minsplit</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>5</span>, <span class='fl'>3</span>))
<span class='no'>inst</span>$<span class='fu'>eval_batch</span>(<span class='no'>design</span>)</div><div class='output co'>#&gt; $batch_nr
#&gt; [1] 1
#&gt; 
#&gt; $uhashes
#&gt; [1] "af268547-2a27-4d42-8621-1ff21a378b6b"
#&gt; [2] "e4ce3fb2-7bc3-40ff-8d79-cb3f20fe2ff0"
#&gt; [3] "b489d229-ae68-42d2-b244-54775f5b1010"
#&gt; [4] "2a441af2-0232-44e0-a844-54c686c4b64e"
#&gt; 
#&gt; $perf
#&gt;    classif.ce
#&gt; 1:        0.1
#&gt; 2:        0.1
#&gt; 3:        0.1
#&gt; 4:        0.1
#&gt; </div><div class='input'><span class='no'>inst</span>$<span class='fu'>archive</span>()</div><div class='output co'>#&gt;    nr batch_nr  resample_result task_id    learner_id resampling_id iters
#&gt; 1:  1        1 &lt;ResampleResult&gt;    iris classif.rpart       holdout     1
#&gt; 2:  2        1 &lt;ResampleResult&gt;    iris classif.rpart       holdout     1
#&gt; 3:  3        1 &lt;ResampleResult&gt;    iris classif.rpart       holdout     1
#&gt; 4:  4        1 &lt;ResampleResult&gt;    iris classif.rpart       holdout     1
#&gt;    params tune_x warnings errors classif.ce
#&gt; 1: &lt;list&gt; &lt;list&gt;        0      0        0.1
#&gt; 2: &lt;list&gt; &lt;list&gt;        0      0        0.1
#&gt; 3: &lt;list&gt; &lt;list&gt;        0      0        0.1
#&gt; 4: &lt;list&gt; &lt;list&gt;        0      0        0.1</div><div class='input'>
<span class='co'># try more points, catch the raised terminated message</span>
<span class='fu'><a href='https://rdrr.io/r/base/conditions.html'>tryCatch</a></span>(
  <span class='no'>inst</span>$<span class='fu'>eval_batch</span>(<span class='fu'><a href='https://Rdatatable.gitlab.io/data.table/reference/data.table.html'>data.table</a></span>(<span class='kw'>cp</span> <span class='kw'>=</span> <span class='fl'>0.01</span>, <span class='kw'>minsplit</span> <span class='kw'>=</span> <span class='fl'>7</span>)),
  <span class='kw'>terminated_error</span> <span class='kw'>=</span> <span class='kw'>function</span>(<span class='no'>e</span>) <span class='fu'><a href='https://rdrr.io/r/base/message.html'>message</a></span>(<span class='fu'><a href='https://rdrr.io/r/base/character.html'>as.character</a></span>(<span class='no'>e</span>))
)</div><div class='output co'>#&gt; <span class='message'>Error: TuningInstance (tsk:iris, lrn:classif.rpart, term:&lt;TerminatorEvals&gt;) terminated</span></div><div class='input'>
<span class='co'># try another point although the budget is now exhausted</span>
<span class='co'># -&gt; no extra evaluations</span>
<span class='fu'><a href='https://rdrr.io/r/base/conditions.html'>tryCatch</a></span>(
  <span class='no'>inst</span>$<span class='fu'>eval_batch</span>(<span class='fu'><a href='https://Rdatatable.gitlab.io/data.table/reference/data.table.html'>data.table</a></span>(<span class='kw'>cp</span> <span class='kw'>=</span> <span class='fl'>0.01</span>, <span class='kw'>minsplit</span> <span class='kw'>=</span> <span class='fl'>9</span>)),
  <span class='kw'>terminated_error</span> <span class='kw'>=</span> <span class='kw'>function</span>(<span class='no'>e</span>) <span class='fu'><a href='https://rdrr.io/r/base/message.html'>message</a></span>(<span class='fu'><a href='https://rdrr.io/r/base/character.html'>as.character</a></span>(<span class='no'>e</span>))
)</div><div class='output co'>#&gt; <span class='message'>Error: TuningInstance (tsk:iris, lrn:classif.rpart, term:&lt;TerminatorEvals&gt;) terminated</span></div><div class='input'>
<span class='no'>inst</span>$<span class='fu'>archive</span>()</div><div class='output co'>#&gt;    nr batch_nr  resample_result task_id    learner_id resampling_id iters
#&gt; 1:  1        1 &lt;ResampleResult&gt;    iris classif.rpart       holdout     1
#&gt; 2:  2        1 &lt;ResampleResult&gt;    iris classif.rpart       holdout     1
#&gt; 3:  3        1 &lt;ResampleResult&gt;    iris classif.rpart       holdout     1
#&gt; 4:  4        1 &lt;ResampleResult&gt;    iris classif.rpart       holdout     1
#&gt; 5:  5        2 &lt;ResampleResult&gt;    iris classif.rpart       holdout     1
#&gt;    params tune_x warnings errors classif.ce
#&gt; 1: &lt;list&gt; &lt;list&gt;        0      0        0.1
#&gt; 2: &lt;list&gt; &lt;list&gt;        0      0        0.1
#&gt; 3: &lt;list&gt; &lt;list&gt;        0      0        0.1
#&gt; 4: &lt;list&gt; &lt;list&gt;        0      0        0.1
#&gt; 5: &lt;list&gt; &lt;list&gt;        0      0        0.1</div><div class='input'>
<span class='co'>### Error handling</span>
<span class='co'># get a learner which breaks with 50% probability</span>
<span class='co'># set encapsulation + fallback</span>
<span class='no'>learner</span> <span class='kw'>=</span> <span class='fu'><a href='https://mlr3.mlr-org.com/reference/mlr_sugar.html'>lrn</a></span>(<span class='st'>"classif.debug"</span>, <span class='kw'>error_train</span> <span class='kw'>=</span> <span class='fl'>0.5</span>)
<span class='no'>learner</span>$<span class='no'>encapsulate</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='kw'>train</span> <span class='kw'>=</span> <span class='st'>"evaluate"</span>, <span class='kw'>predict</span> <span class='kw'>=</span> <span class='st'>"evaluate"</span>)
<span class='no'>learner</span>$<span class='no'>fallback</span> <span class='kw'>=</span> <span class='fu'><a href='https://mlr3.mlr-org.com/reference/mlr_sugar.html'>lrn</a></span>(<span class='st'>"classif.featureless"</span>)

<span class='no'>param_set</span> <span class='kw'>=</span> <span class='no'>ParamSet</span>$<span class='fu'>new</span>(<span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span>(
  <span class='no'>ParamDbl</span>$<span class='fu'>new</span>(<span class='st'>"x"</span>, <span class='kw'>lower</span> <span class='kw'>=</span> <span class='fl'>0</span>, <span class='kw'>upper</span> <span class='kw'>=</span> <span class='fl'>1</span>)
))

<span class='no'>inst</span> <span class='kw'>=</span> <span class='no'>TuningInstance</span>$<span class='fu'>new</span>(
  <span class='kw'>task</span> <span class='kw'>=</span> <span class='fu'><a href='https://mlr3.mlr-org.com/reference/mlr_sugar.html'>tsk</a></span>(<span class='st'>"wine"</span>),
  <span class='kw'>learner</span> <span class='kw'>=</span> <span class='no'>learner</span>,
  <span class='kw'>resampling</span> <span class='kw'>=</span> <span class='fu'><a href='https://mlr3.mlr-org.com/reference/mlr_sugar.html'>rsmp</a></span>(<span class='st'>"cv"</span>, <span class='kw'>folds</span> <span class='kw'>=</span> <span class='fl'>3</span>),
  <span class='kw'>measures</span> <span class='kw'>=</span> <span class='fu'><a href='https://mlr3.mlr-org.com/reference/mlr_sugar.html'>msr</a></span>(<span class='st'>"classif.ce"</span>),
  <span class='kw'>param_set</span> <span class='kw'>=</span> <span class='no'>param_set</span>,
  <span class='kw'>terminator</span> <span class='kw'>=</span> <span class='fu'><a href='tnr.html'>term</a></span>(<span class='st'>"evals"</span>, <span class='kw'>n_evals</span> <span class='kw'>=</span> <span class='fl'>5</span>)
)

<span class='fu'><a href='https://rdrr.io/r/base/conditions.html'>tryCatch</a></span>(
  <span class='no'>inst</span>$<span class='fu'>eval_batch</span>(<span class='fu'><a href='https://Rdatatable.gitlab.io/data.table/reference/data.table.html'>data.table</a></span>(<span class='kw'>x</span> <span class='kw'>=</span> <span class='fl'>1</span>:<span class='fl'>5</span> / <span class='fl'>5</span>)),
  <span class='kw'>terminated_error</span> <span class='kw'>=</span> <span class='kw'>function</span>(<span class='no'>e</span>) <span class='fu'><a href='https://rdrr.io/r/base/message.html'>message</a></span>(<span class='fu'><a href='https://rdrr.io/r/base/character.html'>as.character</a></span>(<span class='no'>e</span>))
)</div><div class='output co'>#&gt; <span class='message'>Error: TuningInstance (tsk:wine, lrn:classif.debug, term:&lt;TerminatorEvals&gt;) terminated</span></div><div class='input'>
<span class='no'>archive</span> <span class='kw'>=</span> <span class='no'>inst</span>$<span class='fu'>archive</span>()

<span class='co'># column errors: multiple errors recorded</span>
<span class='fu'><a href='https://rdrr.io/r/base/print.html'>print</a></span>(<span class='no'>archive</span>)</div><div class='output co'>#&gt;    nr batch_nr  resample_result task_id    learner_id resampling_id iters
#&gt; 1:  1        1 &lt;ResampleResult&gt;    wine classif.debug            cv     3
#&gt; 2:  2        1 &lt;ResampleResult&gt;    wine classif.debug            cv     3
#&gt; 3:  3        1 &lt;ResampleResult&gt;    wine classif.debug            cv     3
#&gt; 4:  4        1 &lt;ResampleResult&gt;    wine classif.debug            cv     3
#&gt; 5:  5        1 &lt;ResampleResult&gt;    wine classif.debug            cv     3
#&gt;    params tune_x warnings errors classif.ce
#&gt; 1: &lt;list&gt; &lt;list&gt;        0      2  0.6851224
#&gt; 2: &lt;list&gt; &lt;list&gt;        0      0  0.6073446
#&gt; 3: &lt;list&gt; &lt;list&gt;        0      2  0.6794727
#&gt; 4: &lt;list&gt; &lt;list&gt;        0      2  0.6851224
#&gt; 5: &lt;list&gt; &lt;list&gt;        0      1  0.6016949</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#format">Format</a></li>
      <li><a href="#construction">Construction</a></li>
      <li><a href="#fields">Fields</a></li>
      <li><a href="#methods">Methods</a></li>
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Michel Lang, Jakob Richter, Bernd Bischl, Daniel Schalk.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


